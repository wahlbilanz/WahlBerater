<app-decision-templates #decisionTemplates></app-decision-templates>
<ng-container *ngIf="category">
  <h3>{{ category.title }}</h3>
  <nz-collapse *ngIf="claims">
    <ng-container *ngFor="let claim of claims; let i = index">
      <nz-collapse-panel
        *ngIf="claim.category === categoryId && i < renderRows"
        class="claim"
        [nzHeader]="claim.title"
        [nzExtra]="voteIcon"
        (nzActiveChange)="activate(i)"
      >
        <div *ngIf="activePanels[i]">
          <div nz-row class="claim-info">
            <p class="background" *ngIf="claim.description" nz-col nzXs="24" nzSm="24" nzLg="12" nzXl="12">
              <span [innerHTML]="claim.description | markdown"></span>
            </p>
            <div
              nz-col
              *ngIf="votes[claim.claimId]"
              class="own-decision"
              nzXs="24"
              nzSm="24"
              [nzLg]="claim.description ? 12 : 24"
              [nzXl]="claim.description ? 12 : 24"
            >
              <app-decision-button
                [vote]="votes[claim.claimId]"
                [agreement]="votes[claim.claimId]?.fav ? agreement.USER_FAV : agreement.USER"
                label="Dein Antwort"
              ></app-decision-button>
            </div>
          </div>
          <h4 *ngIf="this.accessibilityModes?.accessibilityMode">Positionen der Listen:</h4>
          <app-claim-party-buttons
            [claimId]="claim.claimId"
            [claim]="claim"
            [votes]="votes"
            [politicalData]="politicalData"
            [personalCandidates]="personalCandidates"
            [partyScoreResult]="partyScoreResult"
            [showCandidates]="false"
          ></app-claim-party-buttons>

          <app-claim-links [claimId]="claim.claimId"></app-claim-links>
        </div>
        <ng-template #voteIcon>
          <app-decision-icon
            [vote]="votes[claim.claimId]"
            [agreement]="votes[claim.claimId]?.fav ? agreement.USER_FAV : agreement.USER"
          ></app-decision-icon>
        </ng-template>
      </nz-collapse-panel>
    </ng-container>
  </nz-collapse>
</ng-container>
